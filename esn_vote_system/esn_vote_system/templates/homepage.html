{% extends 'base.html' %}

{% block title %}Accueil - Rentizy{% endblock %}

{% block content %}

{% load custom_filter %}

<div class="w-full flex-col justify-start items-start gap-12 inline-flex">
  <div class="w-full flex-col justify-start items-start gap-2 flex relative">
    <div class="w-full h-[448px] bg-slate-900 bg-opacity-50 rounded-2xl relative">
      <img class="object-cover w-full h-full rounded-2xl" 
        src="https://cdn.discordapp.com/attachments/718214061283737712/1227991035033030706/alexandra-gorn-JIUjvqe2ZHg-unsplash.jpg?ex=662a6ac5&is=6617f5c5&hm=f8b8e71d2e6c0e1b5de9282c0993d13871ffcaef199651d76c1de2a7d04d266f&"
        alt="Image d'accueil" />
      <div id="infos" class="absolute inset-0 h-[216px] flex-col justify-center items-center gap-8 flex">
        <div class="self-stretch h-32 flex-col justify-start items-center gap-6 flex">
          <div class="self-stretch text-center text-slate-50 text-5xl font-bold leading-[72px]">Ceci est une baseline</div>
          <div class="self-stretch text-center text-slate-50 text-lg font-semibold leading-loose">Lorem ipsum dolor sit amet consectetur. Venenatis sagittis massa laoreet eget.</div>
        </div>
        <form method="post" >
        {% csrf_token %}
        <div class="self-stretch justify-end items-start gap-4 inline-flex">
          <div class="text-slate-500 grow shrink basis-0 self-stretch justify-center items-start gap-2 flex">
            <div class="flex-row justify-start items-center gap-2 flex">
              <input type="text" name="where" placeholder="Où ?" 
                class="grow shrink basis-0 h-14 pl-12 pr-[94px] py-4 bg-slate-50 rounded-lg shadow border border-slate-300 justify-start items-center gap-2 flex">
              <div class="pl-[12px] w-6 h-6 absolute">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                  <path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" />
                </svg>                                
              </div>
            </div>
            <div class="justify-start items-center gap-2 flex">
              <input name="budget" placeholder="Budget" type="number"
                class="grow shrink basis-0 h-14 pl-12 pr-6 py-4 bg-slate-50 rounded-lg shadow border border-slate-300 justify-between items-start flex">
              <div class="pl-[12px] w-5 h-6 absolute">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                  <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.902 7.098a3.75 3.75 0 0 1 3.903-.884.75.75 0 1 0 .498-1.415A5.25 5.25 0 0 0 8.005 9.75H7.5a.75.75 0 0 0 0 1.5h.054a5.281 5.281 0 0 0 0 1.5H7.5a.75.75 0 0 0 0 1.5h.505a5.25 5.25 0 0 0 6.494 2.701.75.75 0 1 0-.498-1.415 3.75 3.75 0 0 1-4.252-1.286h3.001a.75.75 0 0 0 0-1.5H9.075a3.77 3.77 0 0 1 0-1.5h3.675a.75.75 0 0 0 0-1.5h-3c.105-.14.221-.274.348-.402Z" clip-rule="evenodd" />
                </svg>                  
              </div>
            </div>

            <div class="justify-start items-center gap-2 flex">
              <select name="type" placeholder="Type"
                class="h-14 pr-6 pl-12 py-4 bg-slate-50 rounded-lg shadow border border-slate-300 justify-between items-center flex">
                <option value="Type">Type</option>
                <option value="shared">Colocation</option>
                <option value="not_shared">Appartement</option>
              </select>

              <div class="pl-[12px] w-5 h-6 absolute">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                  <path d="M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z" />
                  <path d="m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z" />
                </svg>                  
              </div>
            </div>
          </div>
          <button type="submit"
            class="cursor-pointer px-6 py-4 text-slate-50 bg-teal-500 rounded-lg justify-center items-center gap-2 flex">
            Rechercher
          </button>
        </div>
        </form>
      </div>
    </div>
  </div>
  
  <div class="w-full self-stretch flex-col justify-start items-start gap-6 flex mb-12">
    <div class="w-full flex-col justify-start items-start gap-10 flex">
        <div class="text-slate-900 text-2xl font-bold  leading-[48px]">Nouvelles propriétés</div>
        <div id="house-carousel" class="items w-full h-[350px] justify-start items-start gap-5 inline-flex overflow-x-hidden">
            {% for house in houses %}
            <a id="house_{{forloop.counter}}" href="{% url 'house' house_id=house.id|get_house_url_by_house_id %}"
            class="item {% if forloop.counter == 1 %} active {% elif forloop.counter == 2 %} next {% elif forloop.counter == number_of_houses %} prev {% endif %}
             self-stretch bg-slate-50 rounded-lg shadow flex-col justify-start items-start inline-flex">
          <img class="w-full object-cover w-full h-48 rounded-lg" src="{{ house.photos|photos_first_img }}" alt="{{ house.name }} Image" />
          <div class="self-stretch p-4 flex-col justify-start items-start flex space-y-0.5">
            <div class="self-stretch flex-col justify-center items-start flex">
              <div class="self-stretch text-slate-400 text-sm font-medium leading-[17.50px]">
                {{ house.city }} {{ house.address }}, {{ house.country }}
              </div>
              <div class="self-stretch text-slate-900 text-2xl font-bold leading-[48px]">
                {{ house.name }}
              </div>
            </div>
            <div class="self-stretch justify-start items-center gap-6 inline-flex">
              <div class="justify-center items-center gap-2 flex">
                <div class="text-slate-400 text-sm font-medium  leading-[17.50px]">
                  {{ house.is_shared|get_house_type_str_from_boolean }}
                </div>
              </div>
              <div class="justify-center items-center gap-2 flex">
                <div class="w-[18px] h-[18px] relative">
                  <svg xmlns="http://www.w3.org/2000/svg" width="19" height="18" viewBox="0 0 19 18" fill="none">
                    <path d="M15.1121 9V3C15.1121 2.80109 15.0331 2.61032 14.8924 2.46967C14.7518 2.32902 14.561 2.25 14.3621 2.25C14.1632 2.25 13.9724 2.32902 13.8317 2.46967C13.6911 2.61032 13.6121 2.80109 13.6121 3V4.5H4.61208V3C4.61208 2.80109 4.53306 2.61032 4.39241 2.46967C4.25175 2.32902 4.06099 2.25 3.86208 2.25C3.66316 2.25 3.4724 2.32902 3.33175 2.46967C3.19109 2.61032 3.11208 2.80109 3.11208 3V9C2.71425 9 2.33272 9.15804 2.05142 9.43934C1.77011 9.72064 1.61208 10.1022 1.61208 10.5V15C1.61208 15.1989 1.69109 15.3897 1.83175 15.5303C1.9724 15.671 2.16316 15.75 2.36208 15.75C2.56099 15.75 2.75175 15.671 2.89241 15.5303C3.03306 15.3897 3.11208 15.1989 3.11208 15V13.5H15.1121V15C15.1121 15.1989 15.1911 15.3897 15.3317 15.5303C15.4724 15.671 15.6632 15.75 15.8621 15.75C16.061 15.75 16.2518 15.671 16.3924 15.5303C16.5331 15.3897 16.6121 15.1989 16.6121 15V10.5C16.6121 10.1022 16.454 9.72064 16.1727 9.43934C15.8914 9.15804 15.5099 9 15.1121 9ZM10.6121 7.5H12.8621C13.061 7.5 13.2518 7.57902 13.3924 7.71967C13.5331 7.86032 13.6121 8.05109 13.6121 8.25V9H9.86207V8.25C9.86207 8.05109 9.94109 7.86032 10.0817 7.71967C10.2224 7.57902 10.4132 7.5 10.6121 7.5ZM4.61208 8.25C4.61208 8.05109 4.69109 7.86032 4.83175 7.71967C4.9724 7.57902 5.16316 7.5 5.36207 7.5H7.61207C7.81099 7.5 8.00175 7.57902 8.1424 7.71967C8.28306 7.86032 8.36207 8.05109 8.36207 8.25V9H4.61208V8.25Z" fill="#94A3B8"/>
                  </svg>
                </div>
                <div class="text-slate-400 text-sm font-medium leading-[17.50px]">
                  {{ house.id|get_house_number_of_bedrooms_by_house_id }}
                </div>
              </div>
              <div class="justify-center items-center gap-2 flex">
                <div class="w-[18px] h-[18px] relative">
                  <svg xmlns="http://www.w3.org/2000/svg" width="19" height="18" viewBox="0 0 19 18" fill="none">
                    <path d="M12.8133 6.0702C12.633 4.75486 11.9611 3.55668 10.9328 2.71691C9.90445 1.87714 8.59618 1.45814 7.27134 1.54427C5.9465 1.63041 4.70349 2.21528 3.79259 3.18114C2.88168 4.14699 2.37054 5.42209 2.36206 6.7497V15.7497C2.36206 15.9486 2.44108 16.1394 2.58173 16.28C2.72238 16.4207 2.91315 16.4997 3.11206 16.4997C3.31097 16.4997 3.50174 16.4207 3.64239 16.28C3.78304 16.1394 3.86206 15.9486 3.86206 15.7497V6.7497C3.86068 5.81148 4.21153 4.90692 4.8452 4.21502C5.47886 3.52312 6.34917 3.09428 7.28389 3.01338C8.21862 2.93248 9.14966 3.2054 9.89279 3.77813C10.6359 4.35087 11.137 5.18169 11.2968 6.1062C10.4516 6.31896 9.70252 6.80992 9.17018 7.50007C8.63785 8.19021 8.3532 9.0394 8.36206 9.91095V10.8747C8.36206 11.0736 8.44108 11.2644 8.58173 11.405C8.72238 11.5457 8.91315 11.6247 9.11206 11.6247H15.1121C15.311 11.6247 15.5017 11.5457 15.6424 11.405C15.783 11.2644 15.8621 11.0736 15.8621 10.8747V9.7497C15.861 8.87756 15.5561 8.03304 14.9996 7.36147C14.4432 6.68991 13.6701 6.23329 12.8133 6.0702Z" fill="#94A3B8"/>
                    <path d="M12.1121 13.5C11.9131 13.5 11.7224 13.579 11.5817 13.7197C11.4411 13.8603 11.3621 14.0511 11.3621 14.25V15.75C11.3621 15.9489 11.4411 16.1397 11.5817 16.2803C11.7224 16.421 11.9131 16.5 12.1121 16.5C12.311 16.5 12.5017 16.421 12.6424 16.2803C12.783 16.1397 12.8621 15.9489 12.8621 15.75V14.25C12.8621 14.0511 12.783 13.8603 12.6424 13.7197C12.5017 13.579 12.311 13.5 12.1121 13.5Z" fill="#94A3B8"/>
                    <path d="M15.1121 13.5C14.9131 13.5 14.7224 13.579 14.5817 13.7197C14.4411 13.8603 14.3621 14.0511 14.3621 14.25V15.75C14.3621 15.9489 14.4411 16.1397 14.5817 16.2803C14.7224 16.421 14.9131 16.5 15.1121 16.5C15.311 16.5 15.5017 16.421 15.6424 16.2803C15.783 16.1397 15.8621 15.9489 15.8621 15.75V14.25C15.8621 14.0511 15.783 13.8603 15.6424 13.7197C15.5017 13.579 15.311 13.5 15.1121 13.5Z" fill="#94A3B8"/>
                    <path d="M9.11206 13.5C8.91315 13.5 8.72238 13.579 8.58173 13.7197C8.44108 13.8603 8.36206 14.0511 8.36206 14.25V15.75C8.36206 15.9489 8.44108 16.1397 8.58173 16.2803C8.72238 16.421 8.91315 16.5 9.11206 16.5C9.31097 16.5 9.50174 16.421 9.64239 16.2803C9.78304 16.1397 9.86206 15.9489 9.86206 15.75V14.25C9.86206 14.0511 9.78304 13.8603 9.64239 13.7197C9.50174 13.579 9.31097 13.5 9.11206 13.5Z" fill="#94A3B8"/>
                  </svg>
                </div>
                <div class="text-slate-400 text-sm font-medium leading-[17.50px]">
                  1
                </div>
              </div>
              <div class="justify-center items-center gap-2 flex">
                <div class="w-[18px] h-[18px] relative">
                  <svg xmlns="http://www.w3.org/2000/svg" width="19" height="18" viewBox="0 0 19 18" fill="none">
                    <g clip-path="url(#clip0_203_707)">
                    <path d="M5.23788 0L5.23531 2.05604L5.78638 2.05678L6.33711 2.05752L8.68653 2.06047L8.68544 3.16192L6.33566 3.15896L5.78494 3.15823L5.23383 3.15752L5.23274 4.02033L5.78382 4.02107L6.33454 4.02142L7.31522 4.02289L7.31375 5.12434L6.3331 5.12286L5.78234 5.12251L5.23162 5.12177L5.23018 6.29079L5.7809 6.29114L6.33162 6.29188L8.68139 6.29483L8.67992 7.39628L6.33014 7.39332L5.77977 7.39262L5.2287 7.39223L5.22757 8.33435L5.77833 8.33509L6.32906 8.33544L7.3097 8.33692L7.30861 9.43836L6.32758 9.43692L5.77686 9.43653L5.22613 9.4358L5.22466 10.5251L5.77573 10.5255L6.32649 10.5262L8.67626 10.5292L8.67478 11.6306L6.32501 11.6277L5.77429 11.627L5.22357 11.6266L5.22209 12.6484L5.77281 12.6491L6.32389 12.6495L7.30457 12.651L7.30309 13.7524L6.32245 13.7509L5.77172 13.7506L5.22061 13.7499L5.21952 14.7595L5.77025 14.7602L6.32097 14.761L8.67074 14.7639L8.66927 15.8654L6.31988 15.8624L5.76877 15.8617L5.21805 15.861L5.21548 17.9904L12.9862 18L13.0086 0.0095625L5.23788 0Z" fill="#94A3B8"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_203_707">
                    <rect width="18" height="18" fill="white" transform="translate(0.112061)"/>
                    </clipPath>
                    </defs>
                    </svg>
                </div>
                <div class="text-slate-400 text-sm font-medium  leading-[17.50px]">
                  {{house.area}} m²
                </div>
              </div>
            </div>
            <div class="self-stretch justify-start items-end gap-1.5 inline-flex">
              <div class="text-black text-xs font-medium">à partir de </div>
              <div class="justify-center items-end flex">
                <div class="text-black text-2xl font-bold">{{house.id|display_house_price }}</div>
                <div class="text-black text-xs font-medium">/mois</div>
              </div>
            </div>
          </div>
        </a>
      {% endfor %}
      <div class="button-container">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 32" stroke-width="1.5" stroke="currentColor"
            class="button text-slate-900 w-16 h-16">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 32" stroke-width="1.5" stroke="currentColor"
            class="button text-slate-900 w-16 h-16">
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
          </svg>       
      </div>
      </div>
    </div>
    <div class="self-stretch justify-center items-center gap-[15px] inline-flex">
      <div id="dot_1" class="dot w-3 h-3 bg-slate-300 rounded-full"></div>
      <div id="dot_2" class="dot w-4 h-4 bg-teal-500 rounded-full"></div>
      <div id="dot_3" class="dot w-3 h-3 bg-slate-300 rounded-full"></div>
    </div>
  </div>
</div>
  
<style>
  #infos {
    width: 80%; /* Adjust as needed */
    height: auto; /* Adjust as needed */
    margin: auto;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

.items {
  width: 100%;
  user-select: none;
  height: 350px;
  overflow: hidden;
}

.item {
  width:30%;
}

.items .item {
  position: absolute;
  transform: translate(-50%, -50%);
  transition: all 300ms ease-in-out;
  left:50%;
  margin-top: 160px;;
  z-index: -1;
  opacity: 0;
}

.item img {
  width: 100%;
  object-fit: cover;
}

.item.active {
  opacity: 1;
  z-index: 99;
  box-shadow: 0px 0px 105px -35px rgba(0, 0, 0, 0.75);
}

.item.prev {
  z-index: 2;
  opacity: 0.6;
  transform: translate(-125%, -50%);
}

.item.next {
  z-index: 2;
  opacity: 0.6;
  transform: translate(25%, -50%);
}

.items .button-container {
  position: absolute;
  left: 50%;
  transform: translate(-50%, -50%);
  width:85%;
  z-index: 100;
}

.button-container .button {
  font-size: 32px;
  cursor: pointer;
  position: relative;
  opacity: 0.8;
  transition: all 300ms ease-in-out;
  margin-top: 260px;
}

.button-container .button:hover {
  opacity: 1;
}

.button-container .button:before {
  content: "";
  position: absolute;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 50px;
  height: 50px;
  background-color: rgb(20, 184, 166);
  border-radius: 50%;
  z-index: -99;
}

.button-container .button:nth-child(1) {
  float: left;
}

.button-container .button:nth-child(2) {
  float: right;
}
</style>

<script>
// I will be creating a different pen with touch support but right // now I have no time for it due to school

const slider = document.querySelector(".items");
		const slides = document.querySelectorAll(".item");
		const button = document.querySelectorAll(".button");

		let current = 0;
		let prev = 6;
		let next = 1;

		for (let i = 0; i < button.length; i++) {
			button[i].addEventListener("click", () => i == 0 ? gotoPrev() : gotoNext());
		}

		const gotoPrev = () => current > 0 ? gotoNum(current - 1) : gotoNum(slides.length - 1);

		const gotoNext = () => current < 4 ? gotoNum(current + 1) : gotoNum(0);

		const gotoNum = number => {
			current = number;
			prev = current - 1;
			next = current + 1;

			for (let i = 0; i < slides.length; i++) {
				slides[i].classList.remove("active");
				slides[i].classList.remove("prev");
				slides[i].classList.remove("next");
			}

			if (next == 5) {
				next = 0;
			}

			if (prev == -1) {
				prev = 4;
			}

			slides[current].classList.add("active");
			slides[prev].classList.add("prev");
			slides[next].classList.add("next");
		}


</script>


  
{% endblock %}